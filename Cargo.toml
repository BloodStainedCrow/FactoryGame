# cargo-features = ["codegen-backend"]
[package]
name = "factory"
version = "0.0.0"
edition = "2021"
rust-version = "1.81"

[dependencies]
bytemuck = { version = "1.21.0", features = ["derive"] }
enum-map = "2.7.3"
proptest = "1.6.0"
# scoped_threadpool = { version = "0.1.9" }
rand = "0.9.0"

[dev-dependencies]
rand = "0.9.0"

[lints.rust]
unsafe_code = "forbid"

[lints.clippy]
enum_glob_use = { level = "deny", priority = -1 }
pedantic = "deny"
nursery = "deny"
unwrap_used = { level = "deny", priority = -1 }
wildcard_enum_match_arm = { level = "deny", priority = -1 }
match_same_arms = { level = "deny", priority = -1 }

module_name_repetitions = { level = "allow", priority = 1 }

[profile.release-with-debug]
inherits = "release"
debug = true

[profile.fast-compile]
inherits = "dev"
opt-level = 0
debug = 0
strip = "none"
lto = false
codegen-units = 256
incremental = true
# codegen-backend = "cranelift"

[profile.release]
lto = true
codegen-units = 1
